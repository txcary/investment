<!doctype html>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>

<script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script>
<link rel="shortcut icon" type="image/png" href="images/stocks-16.png"/>

<script data-main="js/portfolio.js" src="https://cdn.bootcss.com/require.js/2.3.5/require.js"></script>



<html>
	<head>
		<style type="text/css">
			.row-margin-20 {margin-top:10px;margin-bottom:10px};
		</style>
	</head>
	<meta charset="utf-8">
	<title>Portfolio</title>
	<body>
<div id="app" class="container-fluid" style="max-width:950px;">
	<div class="row bg-dark text-light row-margin-20">
		<div class="col-md-10">
			<h1>
			<img height="64px" width="64px" src="images/stocks-100.png"/>
			Portfolio <small>Manage your portfolio</small></h1>
		</div>
		<div class="col-md-2">
				<button v-if="isLogined" class="btn pull-right btn-link" v-on:click="logout">Logout {{userName}}</button>
		</div>
	</div>

	<div class="row align-items-center row-margin-20" v-if="!isLogined" style="height:480px;">
		<div class="col-md-4"></div>
		<div class="col-md-4">
		<input v-if="!isLogined" class="form-control" id="login.user" placeholder="User Name"/>
		<input v-if="!isLogined" type="password" class="form-control" id="login.passwd" placeholder="Password"/>
		<button v-if="!isLogined" class="btn pull-right btn-primary" v-on:click="login">Login</button>

<button v-if="!isLogined" class="btn pull-right btn-danger" v-on:click="putPortfolioToServer">Test</button>

		</div>
		<div class="col-md-4"></div>
	</div>

	<div class="row row-margin-20" v-if="isLogined">
		<div class="col-md-12">
			<table class="table table-sm">
				<thead>
					<tr>
						<th>mark</th>
						<th>id</th>
						<th>name</th>
						<th>price</th>
						<th>share</th>
						<th>trade</th>
						<th>capitalization</th>
						<th>level</th>
						<th>lowlevel</th>
						<th>uplevel</th>
						<th>marketlevel</th>
						<th>commands</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="(asset,idx) in portfolio">
						<td>{{asset.mark}}</td>
						<td>{{asset.id}}</td>
						<td>{{asset.name}}</td>
						<td>{{asset.price}}</td>
						<td>{{asset.share}}</td>
						<td>{{asset.trade}}</td>
						<td>{{asset.capitalization}}</td>
						<td>{{asset.level}}</td>
						<td>{{asset.lowlevel}}</td>
						<td>{{asset.uplevel}}</td>
						<td>{{asset.marketlevel}}</td>
						<td>
							<div class="btn-group" role="group">
								<button v-on:click="setCommand('buy', asset.id)" class="btn btn-link" type="button">Buy</button>
								<button v-on:click="setCommand('sell', asset.id)"  class="btn btn-link" type="button">Sell</button>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="row row-margin-20" v-if="isLogined">
		<div class="col-md-4">
			commands
			<div class="btn-group" role="group">
				<button v-on:click="setCommand('buy')" class="btn btn-link" type="button">Buy</button>
				<button v-on:click="setCommand('sell')"  class="btn btn-link" type="button">Sell</button>
				<button v-on:click="setCommand('add')"  class="btn btn-link" type="button">Add</button>
				<button v-on:click="setCommand('score')"  class="btn btn-link" type="button">Score</button>
			</div>
			<div>
				<h4>{{command.pendingCommand}}</h4>
				<div v-if="command.cmdNeedId" class="form-group">
					<label>ID</label> 
					<input class="form-control" id="cmd.id" v-bind:value="command.pendingId" />
				</div>
				<div v-if="command.cmdNeedAmount" class="form-group">
					<label>Amount</label> 
					<input class="form-control" id="cmd.amount" v-bind:value="command.pendingAmout" />
				</div>
				<div v-if="command.cmdNeedPrice" class="form-group">
					<label>Price</label> 
					<input class="form-control" id="cmd.price" v-bind:value="command.pendingPrice" />
				</div>
				<button v-if="command.cmdNeedSubmit" class="btn btn-primary">Submit</button>
			</div>
		</div>
		<div class="col-md-4">
		</div>
		<div class="col-md-4">
			<h3>Statistics</h3>
			<table class="table table-sm">
				<tbody>
					<tr v-for="(value, key) in statistics">
						<td>{{keyToName(key)}}</td>
						<td>{{value}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

</body>
</html>